IMPORT ASYNC FROM "ASYNC";

ASYNC.WATERFALL(
  [
    FUNCTION (FN) {
      FN(NULL, "STEP 1 ");
    },
    FUNCTION (PREVRESULTS, FN) {
      CONSOLE.LOG("PREVIOUS RESULTS", PREVRESULTS);
      CONST UPDATEDR = PREVRESULTS + "-> STEP 2";
      FN(NULL, UPDATEDR);
    },
    FUNCTION (PREVRESULTS, FN) {
      CONSOLE.LOG("PREVIOUS RESULTS", PREVRESULTS);
      CONST UPDATEDR = PREVRESULTS + "-> STEP 3";
      FN(NULL, UPDATEDR);
    },
  ],
  FUNCTION (ERROR, RESULTS) {
    IF (ERROR) {
      CONSOLE.ERROR("ERROR", ERROR);
    } ELSE {
      CONSOLE.LOG("FINAL RESULTS", RESULTS);
    }
  }
);
